# Chapter4 인터넷
### 2. 인터넷의 주소체계


#### (6) 클래스 없는 주소지정
- 가변길이 블록
    - 각 기관은 가변길이 블록으로 21,22,23,24,25,...232개의 주소를 갖는 블록 지정 가능
- 프리픽스와 서픽스
    - 프리픽스(prefix) : netid와 동일 기능
    - 서픽스(suffix) : hostid와 동일 기능
- 프리픽스 길이: 슬래시 표기법
    - 프리픽스의 길이는 주소에 포함되지 않음 -> 슬래시로 구분하여 주소에 추가
    - CIDR(Classless InterDomain Routing), 비공식적 슬래시 표기법(slash notation)이라고도 불림
- 서브네팅
    - 서브네팅 사용 -> 더 많은 계층 만들기 가능
    - 일정 범위 주소를 가진 기관은 범위를 부범위로 나누고, 이를 서브네트워크에 할당 가능

    - 서브넷 설계 과정
        - ㄱ. 각 서브넷 주소의 수는 2의 제곱 승
        - ㄴ. 각 서브넷의 프리픽스 길이
        - ㄷ. 각 서브넷의 첫 주소는 서브 네트워크의 주소 수로 나누기 가능해야 함 -> 더 큰 서브 네트워크에 주소를 먼저 할당함으로써 가능해짐
        
#### (7) IPv6
- IPv4의 문제점
    - IP 주소 부족 문제
    - 유무선 인터넷을 이용한 다양한 단말기 및 서비스 등장
    - 취약한 인터넷 보안
- IPv6의 등장: RFC 2460
    - 차세대 IP에 대한 연구가 진행됨
    - IPv6 탄생
        - 128비트 주소 길이 사용
        - 보안 문제, 라우팅 효율성 문제 해결책 제공
        - Qos(Quality of Service) 보장, 무선 인터넷 지원과 같은 다양한 기능 제공
    - IPv6 특징
        - ㄱ. 확장된 주소 공간
            - IP 주소 공간의 크기를 32비트 -> 128비트로 증가
            - 128비트의 공간은 대략 34*10^32만큼의 주소 사용 가능
            - 주소 부족 문제를 근본적으로 해결
        - ㄴ. 헤더 포맷의 단순화
            - IPv4에서 자주 사용하지 않는 헤더 필드를 제거
            - 추가적으로 필요한 기능은 확장 헤더를 사용하여 수행
    - IPv6 주소 표기법
        - ㄱ. 기본 표기법
            - 긴 주소를 읽기 쉽도록 16비트씩 콜론으로 나누고, 각 필드를 16진수로 표현
        - ㄴ. 주소 생략법
            - IPv6는 0 값이 자주 있기에 몇 가지 생략 방법이 제안 -> 0으로만 구성된 필드가 연속될 경우 필드 안의 0을 모두 삭제하고 2개의 콜론만으로 표현 + 생략은 한 번만 가능
        - ㄷ. 주소 프리픽스의 표기 방법
            - IPv4의 CIDR 표기법과 유사
            - IPv6의 주소 위에 '/'를 표기하고 네트워크 프리픽스 길이를 10진수로 적음
            
#### (8) IPv4 -> IPv6 변환
- 이중 스택
    - 이중 스택 시스템의 주소 성정
        - 두 버전(4,6) 모두 지원
    - 이중 스택 시스템의 DNS 이름 해석
        - IPv6 DNS 주소 저장 방식(AAAA 레코드 유형)과 IPv4 저장방식(A 레코드)을 모두 처리할 수 있어야 함
- 터널링
    - IPv6를 사용하는 두 호스트가 통신할 때, 패킷이 IPv4 사용 지역을 지나는 경우 사용하는 방법
    - 해당 지역을 지나려면 패킷은 IPv4의 주소가 필요하고, IPv6 패킷은 IPv4 패킷으로 캡슐화 & 해당 지역 지날 때 역캡슐화
- 헤더 변환
    - 인터넷 대부분이 IPv6로 변경되고 일부분만이 IPv4 사용할 때 필요한 방법
    - 송신자(IPv6)와 수신자(IPv4) -> 수신자가 IPv4 패킷을 수신해야 하는 상황 -> 터널링 사용 불가 -> 헤더 변환을 통해 헤더의 형태가 완전히 변경돼야만 함