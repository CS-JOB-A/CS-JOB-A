# 4장 데이터베이스
## 4.1. 데이터베이스의 기본
- 데이터 베이스
    - 일정한 규칙 혹은 규약을 통해 구조화되어 저장되는 데이터 모음
    - DBMS: 데이터베이스를 제어, 관리하는 통합 시스템
    - 데이터들은 특정 DBMS마다 정의된 쿼리ㅏ 언어를 통해 삽입, 삭제, 수정, 조회 등을 수행
    - 실시간 접근과 동시 공유 가능


### (1) 엔터티
- 사람, 장소, 물건, 사건, 개념 등 여러 개의 속성을 지닌 명사
- 서비스의 요구사항에 맞춰 속성이 정해짐
- 약한 엔터티
    - 혼자 존재하지 못하고 다른 엔터티의 존재 여부에 따라 종속적
- 강한 엔터티
    - 약한 엔터티와 반대

### (2) 릴레이션
- 데이터베이스에서 정보를 구분하여 저장하는 기본 단위
- 테이블이라고 보면 됨
- 테이블과 컬렉션
    - 테이블: 관계형 데이터베이스에서 릴레이션을 부르는 말
    - 컬렉션: NoSQL 데이터베이스에서 부르는 말
- 레코드 쌓여 -> 테이블 -> 테이블 쌓여 -> 데이터베이스

### (3) 속성
- 릴레이션에서 관리하는 구체적이며 고유한 이름을 갖는 정보

### (4) 도메인
- 릴레이션에 포함된 각각의 속성들이 가질 수 있는 값의 집합(범위)
- 예를 들어 성별의 도메인은 남, 녀

### (5) 필드와 레코드
- 필드와 레코드로 구성된 테이블을 만들 수 있다
```sql
CREATE TABLE book (
    id INT NOT NULL AUTO_INCREMENT,
    title VARCHAR(255),
    author_id INT,
    publishing_year VARCHAR(255),
    genre VARCHAR(255),
    created_at DATETIME,
    updated_at DATETIME,
    PRIMARY KEY (id)
);
```

- 필드 타입 
    - 숫자 타입
        - TINYINT, SMALLINT, MEDIUMINT, INT, BIGINT
    - 날짜 타입
        - DATE, DATETIME, TIMESTAMP
    - 문자 타입
        - CHAR, VARCHAR
        - TEXT(큰 문자열 저장, 게시판 본문 저장), BLOB(이미지, 동영상 등 큰 데이터 저장에 사용)
            - 근데 이미지나 동영상 등은 대개 s3 서버에 올리고 파일 경로는 VARCHAR로 저장함
        - ENUM, SET
            - 둘 다 문자열 열거 타입

### (6) 관계
- 하나의 데이터베이스에는 여러 개의 테이블이 있음 -> 서로 "관계" 정의
- ㄱ. 1:1 관계
    - 예를 들어, 유저당 유저 이메일 하나씩
- ㄴ. 1:N 관계
    - 한 유저(1)가 여러 개의 상품(N)을 장바구니에 넣음
    - 한 개체가 다른 많은 개체를 포함하는 관계
- ㄷ. N:M 관계
    - 학생과 강의의 관계 -> 학생은 여러 개의 강의를 듣고, 강의도 여러 명의 학생을 포함
    - 이 관계에서 테이블 두 개를 직접 연결해서 구축X 1:N, 1:M 관계를 갖는 테이블 두 개로 나눠서 설정함

### (7) 키
- 테이블 간의 관계를 좀 더 명확히, 테이블 자체의 인덱스를 위해 설정된 장치
- ㄱ. 기본키
    - PK
    - 유일성과 최소성
    - 테이블의 데이터 중 고유하게 존재하는 속성 -> 중복되면 안 됨
    - 자연키와 인조키 중 골라서 설정
        - 자연키: 중복된 값들을 제외하며 중복되지 않는 것을 자연스레 뽑다가 나오는 키 -> 언젠가 변하는 속성을 가짐
        - 인조키: 인위적으로 생성한 키 -> 자연키와 반대로 변하지 않음
        - 보통 기본키는 인조키로 설정하는 편
- ㄴ. 외래키
    - FK
    - 다른 테이블의 기본키를 그대로 참조하는 값
    - 개체와의 관계를 식별하는 데 사용
    - 중복돼도 ㄱㅊ
- ㄷ. 후보키
    - 기본키가 될 수 있는 후보들
    - 유일성과 최소성
- ㄹ. 슈퍼키
    - 각 레코드를 유일하게 식별할 수 있는 유일성을 갖춘 키
- ㅁ. 대체키
    - 후보키가 두 개 이상일 경우, 어느 하나를 기본키로 지정하고 남은 후보키들