# 9. TCP 프로토콜 - 연결지향형

### (1) TCP 3Way Handshake

- TCP를 이용한 데이터 통신 시 프로세스와 프로세스 연결 위해 가장 먼저 수행되는 과정 -> 3Way Handshake라고 함
    - ㄱ. 클라이언트가 서버에게 요청 패킷 전송
    - ㄴ. 서버가 클라이언트의 요청을 받아들이는 패킷 전송
    - ㄷ. 클라이언트는 이를 최종적으로 수락하는 패킷 전송

- 연결 수립 과정
    - 3Way handshake 과정 후에 드디어 클라이언트가 요청을 보낼 차례가 됨(헷갈리기 쉬움)
    - 연결 수립 후 보안 상 뚫려서 서버가 다른 나쁜놈과 통신 -> 세션 하이재킹
    

### (2) TCP를 이용한 데이터 전송 과정

- 데이터 송수신 과정 규칙
    - 보낸 쪽에서 또 보낼 때는 SEQ 번호와 ACK 번호 그대로
    - 받는 쪽에서 SEQ 번호는 받은 ACK 번호가 됨
    - 받는 쪽에서 ACK 번호는 받은 SEQ 번호 + 데이터의 크기(페이로드)


### (3) TCP 연결 상태 변화 - TCP 상태전이도

- TCP의 여러가지 상태 변화
- LISTENING에서 EATABLISHED 상태가 돼야 데이터를 주고 받을 수 있는 상태가 된 거임

                                (LISTENING: 서버)
(SYN_SENT: 클라이언트)           (SYN_SECEIVED: 서버)
(ESTABLISHED)                   (ESTABLISHED)
