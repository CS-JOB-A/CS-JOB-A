# ARP 프로토콜: 통신하기 전 반드시 필요

### 1. ARP 프로토콜

- IP 주소를 이용해서 MAC 주소를 알아오는 프로토콜
    - 같은 네트워크 대역에서 통신하기 위해선 MAC 주소가 필요
- 같은 네트워크 대역에서 통신 -> IP 주소와 MAC 주소 모두 필요(데이터를 보내려면 7계층부터 캡슐화)

### 2. ARP 프로토콜 구조

- 총 28 Bytes

- ARP 요청
    - 출발지 MAC 주소: 자기꺼
    - 출발지 IP 주소: 자기꺼  
    - 목적지 MAC 주소: 모르니까 00 00 00 00 
    - 목적지 IP 주소: 알고 있으니 씀

- 이더넷 캡슐화
    - 목적지 MAC 주소: 모르니까 FF FF FF FF

- 같은 네트워크 대역의 모두에게 캡슐화한 프로토콜 전송
    - 2계층 프로토콜까지만 디캡슐화: 이더넷만 까서 보고 모두에게 보냄(ARP는 안 깜)
    - 내것과 일치하면 계층 하나씩 깜

- ARP 응답: 오퍼레이션 코드가 2번

### 3. ARP 테이블

- 통신했던 컴퓨터들의 주소는 ARP 테이블에 남음
- 캐시 테이블에 나와 통신했던 사람들의 IP, MAC 주소를 매핑시켜둠
    - 캐시: 영구적X 일정 기간 지나면 사라짐
    - 일정 시간 지난 후 다시 통신하려면 ARP 프로토콜로 다시 MAC 주소를 알아와야 함
    