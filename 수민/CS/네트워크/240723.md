# 6. ICMP 프로토콜 - 멀리 있는 컴퓨터끼리 데이터 주고받기(1)

### (1) IPv4 프로토콜

- IPv4가 하는 일
    - 네트워크 상에서 데이터를 교환하기 위한 프로토콜
    - 데이터의 정확한 전달 보장X -> 다른 계층에서 보정
    - 단순히 멀리 있는 곳으로 보내는 역할만(전달자)

- 구조
    - 20 Bytes + option(4Btyes씩, 최대 10개)

- Offset : 시작으로부터 얼마만큼 떨어져 있다는 의미
- Time To Live (TTL)
    - 패킷이 살아 있을 시간
    - 장비 하나 넘어갈 때마다 숫자가 1씩 줄어듦
    - 숫자가 0이 되는 순간 다른 장비에 패킷 전달하지 않고 죽어버림
    - 응용: 상대방 컴퓨터의 응용체제 알아낼 수 있음. 운영체제마다 설정하는 값이 다르기 때문.


### (2) ICMP 프로토콜 - 특정 대상과 내가 통신이 잘 되는가 ?

- 인터넷 제어 메시지 프로토콜(Internet Control Message Protocol)
- 네트워크 컴퓨터 위에서 돌아가는 운영체제에서 오류 메시지를 전송 받는 데 사용 -> 프로토콜 구조의 Type과 Code를 통해 오류 메시지를 전송 받음

```
(Type)  (code)      (     Checksum     )
(   Other message specific information  )
```

- ICMP 프로토콜의 구조
    - 총 8Bytes
    - Type
        - 8번: 요청
        - 0번: 응답
        - 3번: 목적지에 도달 불가 (경로 설정 잘못함)
        - 11번: 요청 시간 만료(상대방이 방화벽 켜놓은 상황)
        - 5번: ICMP Redirect. 옛날에 쓰던 것. 라우팅 테이블을 원격지에서 수정(남의 것을 수정할 수 있음.. 보안상 문제 발생 가능성 있음)







